<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãŸã ã„ã¾ã£ã´ãƒ¼ - ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</title>
    
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

    <style>
        :root {
            --main-color: #ff9a9e;
            --accent-color: #fad0c4;
            --text-color: #444;
            --bg-color: #fdfbfb;
        }

        body {
            font-family: 'Helvetica Neue', Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-color);
        }

        h1 { font-size: 1.4rem; margin-bottom: 15px; }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-group {
            display: flex;
            width: 100%;
            max-width: 500px;
            margin-bottom: 20px;
            gap: 10px;
        }

        input[type="text"] {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            outline: none;
        }

        .add-btn {
            padding: 0 20px;
            background: var(--main-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* ãƒªã‚¹ãƒˆã‚¹ã‚¿ã‚¤ãƒ« */
        #sortable-list {
            list-style: none;
            padding: 0;
            width: 100%;
            max-width: 500px;
        }

        .list-item {
            background: white;
            margin-bottom: 12px;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            border: 1px solid #eee;
        }

        /* æ´ã‚€ã¨ã“ã‚ */
        .handle {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: grab;
            color: #bbb;
            font-size: 1.2rem;
            margin-right: 5px;
        }

        /* ç·¨é›†ã§ãã‚‹ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ† */
        .item-text {
            flex: 1;
            font-size: 1.1rem;
            padding: 5px;
            outline: none;
            border-bottom: 1px solid transparent;
        }
        .item-text:focus {
            border-bottom: 1px solid var(--main-color);
            background: #fff9f9;
        }

        /* å‰Šé™¤ãƒœã‚¿ãƒ³ */
        .delete-btn {
            background: none;
            border: none;
            color: #ffcccc;
            font-size: 1.2rem;
            padding: 10px;
            cursor: pointer;
        }
        .delete-btn:hover { color: #ff5e5e; }

        /* ä¸¦ã¹æ›¿ãˆä¸­ã®è¦‹ãŸç›® */
        .sortable-ghost { opacity: 0.3; background: #f0f0f0; }
        .sortable-chosen { background: #fffdfd; box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

    <h1>ğŸŒ‡ ãŸã ã„ã¾ã£ã´ãƒ¼è¨­å®š</h1>

    <div class="input-group">
        <input type="text" id="newItemInput" placeholder="æ–°ã—ã„é …ç›®ã‚’å…¥åŠ›...">
        <button class="add-btn" onclick="addItem()">ï¼‹</button>
    </div>

    <ul id="sortable-list">
        </ul>

    <p style="font-size: 0.8rem; color: #999; margin-top: 20px;">
        â€»ä¸‰æœ¬ç·šã‚’ãƒ‰ãƒ©ãƒƒã‚°ã§ç§»å‹•ã€æ–‡å­—ã‚’ã‚¿ãƒƒãƒ—ã§ç·¨é›†ã§ãã¾ã™ã€‚<br>
        â€»å¤‰æ›´ã¯è‡ªå‹•ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚
    </p>

    <script>
        const listContainer = document.getElementById('sortable-list');
        const inputField = document.getElementById('newItemInput');

        // 1. ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
        window.onload = () => {
            const savedData = JSON.parse(localStorage.getItem('myTadaimaList')) || [
                "æ‰‹æ´—ã„ã†ãŒã„ã‚’ã™ã‚‹",
                "ãƒ©ãƒ³ãƒ‰ã‚»ãƒ«ã‚’ç‰‡ä»˜ã‘ã‚‹",
                "ãŠãŸã‚ˆã‚Šã‚’å‡ºã™"
            ];
            savedData.forEach(text => createItem(text));
        };

        // 2. é …ç›®ã‚’ä½œæˆã™ã‚‹é–¢æ•°
        function createItem(text) {
            const li = document.createElement('li');
            li.className = 'list-item';
            li.innerHTML = `
                <div class="handle">â˜°</div>
                <div class="item-text" contenteditable="true" oninput="saveAll()">${text}</div>
                <button class="delete-btn" onclick="deleteItem(this)">âœ•</button>
            `;
            listContainer.appendChild(li);
        }

        // 3. è¿½åŠ ãƒœã‚¿ãƒ³ã®å‡¦ç†
        function addItem() {
            const text = inputField.value.trim();
            if (text) {
                createItem(text);
                inputField.value = '';
                saveAll();
            }
        }

        // 4. å‰Šé™¤å‡¦ç†
        function deleteItem(btn) {
            if(confirm('ã“ã®é …ç›®ã‚’æ¶ˆã—ã¦ã‚‚ã„ã„ã§ã™ã‹ï¼Ÿ')) {
                btn.parentElement.remove();
                saveAll();
            }
        }

        // 5. ä¸¦ã¹æ›¿ãˆã®è¨­å®š
        new Sortable(listContainer, {
            handle: '.handle',
            animation: 150,
            ghostClass: 'sortable-ghost',
            chosenClass: 'sortable-chosen',
            onEnd: saveAll // ä¸¦ã¹æ›¿ãˆãŸã‚‰ä¿å­˜
        });

        // 6. ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ï¼ˆLocalStorageï¼‰
        function saveAll() {
            const items = [];
            document.querySelectorAll('.item-text').forEach(el => {
                items.push(el.innerText);
            });
            localStorage.setItem('myTadaimaList', JSON.stringify(items));
        }

        // Enterã‚­ãƒ¼ã§ã‚‚è¿½åŠ ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
        inputField.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addItem();
        });
    </script>
</body>
</html>